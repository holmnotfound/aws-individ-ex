{
  "version": 3,
  "sources": ["../../../../functions/FilterUsers/index.js"],
  "sourcesContent": ["import { DynamoDBClient, QueryCommand } from \"@aws-sdk/client-dynamodb\";\nimport { unmarshall } from \"@aws-sdk/util-dynamodb\";\n\nconst client = new DynamoDBClient({ region: \"eu-north-1\" });\n\nexport const handler = async (event) => {\n  const username = event.pathParameters?.username; // <-- H\u00C4R!\n\n  try {\n    const command = new QueryCommand({\n      TableName: \"message-api\",\n      KeyConditionExpression: \"pk = :pk\",\n      ExpressionAttributeValues: {\n        \":pk\": { S: \"Message\" },\n      },\n      FilterExpression: \"username = :username\", // Filter, om username inte \u00E4r del av nyckel\n      ExpressionAttributeValues: {\n        \":pk\": { S: \"Message\" },\n        \":username\": { S: username },\n      },\n    });\n\n    const response = await client.send(command);\n    const items = response.Items.map((item) => unmarshall(item));\n\n    return {\n      statusCode: 200,\n      body: JSON.stringify(items),\n    };\n  } catch (error) {\n    console.error(\"Fel vid h\u00E4mtning av meddelanden:\", error);\n    return {\n      statusCode: 500,\n      body: JSON.stringify({ message: \"Fel vid h\u00E4mtning.\", error: error.message }),\n    };\n  }\n};"],
  "mappings": "4ZAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA6C,oCAC7CC,EAA2B,kCAErBC,EAAS,IAAI,iBAAe,CAAE,OAAQ,YAAa,CAAC,EAE7CJ,EAAU,MAAOK,GAAU,CACtC,IAAMC,EAAWD,EAAM,gBAAgB,SAEvC,GAAI,CACF,IAAME,EAAU,IAAI,eAAa,CAC/B,UAAW,cACX,uBAAwB,WACxB,0BAA2B,CACzB,MAAO,CAAE,EAAG,SAAU,CACxB,EACA,iBAAkB,uBAClB,0BAA2B,CACzB,MAAO,CAAE,EAAG,SAAU,EACtB,YAAa,CAAE,EAAGD,CAAS,CAC7B,CACF,CAAC,EAGKE,GADW,MAAMJ,EAAO,KAAKG,CAAO,GACnB,MAAM,IAAKE,MAAS,cAAWA,CAAI,CAAC,EAE3D,MAAO,CACL,WAAY,IACZ,KAAM,KAAK,UAAUD,CAAK,CAC5B,CACF,OAASE,EAAO,CACd,eAAQ,MAAM,sCAAoCA,CAAK,EAChD,CACL,WAAY,IACZ,KAAM,KAAK,UAAU,CAAE,QAAS,uBAAqB,MAAOA,EAAM,OAAQ,CAAC,CAC7E,CACF,CACF",
  "names": ["index_exports", "__export", "handler", "__toCommonJS", "import_client_dynamodb", "import_util_dynamodb", "client", "event", "username", "command", "items", "item", "error"]
}
