var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var h=(t,e)=>{for(var r in e)d(t,r,{get:e[r],enumerable:!0})},w=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of y(e))!S.call(t,a)&&a!==r&&d(t,a,{get:()=>e[a],enumerable:!(n=v(e,a))||n.enumerable});return t};var U=t=>w(d({},"__esModule",{value:!0}),t);var E={};h(E,{handler:()=>b});module.exports=U(E);var s=require("@aws-sdk/client-dynamodb"),B=require("@aws-sdk/util-dynamodb");var o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).slice(1));function g(t,e=0){return(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase()}var x=require("node:crypto"),i=new Uint8Array(256),m=i.length;function u(){return m>i.length-16&&((0,x.randomFillSync)(i),m=0),i.slice(m,m+=16)}var c=require("node:crypto"),l={randomUUID:c.randomUUID};function I(t,e,r){t=t||{};let n=t.random??t.rng?.()??u();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let a=0;a<16;++a)e[r+a]=n[a];return e}return g(n)}function C(t,e,r){return l.randomUUID&&!e&&!t?l.randomUUID():I(t,e,r)}var p=C;var D=new s.DynamoDBClient({region:"eu-north-1"}),b=async t=>{try{let{username:e,text:r}=JSON.parse(t.body);if(!e||!r)return{statusCode:400,body:JSON.stringify({message:"username och text kr\xE4vs"})};let n=`MESSAGE#${p().toUpperCase().slice(0,5)}`,a={pk:{S:"Message"},sk:{S:n},username:{S:e},text:{S:r},createdAt:{S:new Date().toISOString()}},f=new s.PutItemCommand({TableName:"message-api",Item:a});return await D.send(f),{statusCode:201,body:JSON.stringify({id:n,username:e,text:r,createdAt:new Date().toISOString()})}}catch(e){return console.error("Ett fel uppstod vid skapandet av message",e),{statusCode:500,body:JSON.stringify({message:"Ett fel uppstod vid skapandet av message.",error:e.message})}}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
